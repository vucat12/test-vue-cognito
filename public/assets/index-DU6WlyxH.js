const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/NavBar-dFoVEPP7.js","assets/vendor-CsUw8uuj.js","assets/section-auth-BNoliYnU.js","assets/NavBar-DA1KUzTM.css","assets/section-misc-C-d7Gs7q.js","assets/section-dashboard-CePaFXMC.js","assets/section-discover-DMBP-QMR.js","assets/section-profile-CkM0NFLE.js","assets/section-profile-tn0RQdqM.css","assets/section-shop-yR9g0lVP.js"])))=>i.map(i=>d[i]);
import{d as I,j as T,c as V,o as $,a as f,b as h,e as g,f as k,F as C,g as N,h as j,i as x,k as F}from"./vendor-CsUw8uuj.js";import{_ as U}from"./section-auth-BNoliYnU.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const v=I("auth",{state:()=>({idToken:null,currentUser:null,simulate:null}),actions:{setTokenAndDecode(e){this.idToken=e;const r=T(e);this.currentUser={email:r.email,role:r["custom:role"],kycPassed:r["custom:kycPassed"]==="true",onboardingPassed:r["custom:onboardingPassed"]==="true",awsDataCheck:r["custom:awsDataCheck"]==="true",raw:r}},refreshFromStorage(){const e=localStorage.getItem("idToken");e&&this.setTokenAndDecode(e)},simulateRole(e,r={}){this.simulate={role:e,...r}},updateUserAttributesLocally(e){this.currentUser={...this.currentUser,...e}},logout(){localStorage.clear(),this.$reset()}},persist:!0}),z={style:{padding:"1rem","background-color":"#f0f0f0",display:"flex",gap:"1rem"}},B={__name:"App",setup(e){return v().simulateRole("creator",{onboardingPassed:!0,kycPassed:!0}),(n,o)=>{const t=k("router-link"),s=k("router-view");return $(),V(C,null,[f("nav",z,[h(t,{to:"/sign-up"},{default:g(()=>o[0]||(o[0]=[f("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Sign Up ",-1)])),_:1,__:[0]}),h(t,{to:"/log-in"},{default:g(()=>o[1]||(o[1]=[f("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Log In ",-1)])),_:1,__:[1]}),h(t,{to:"/dashboard"},{default:g(()=>o[2]||(o[2]=[f("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Dashboard ",-1)])),_:1,__:[2]}),h(t,{to:"/profile"},{default:g(()=>o[3]||(o[3]=[f("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Profile ",-1)])),_:1,__:[3]}),h(t,{to:"/discover"},{default:g(()=>o[4]||(o[4]=[f("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Discover ",-1)])),_:1,__:[4]}),h(t,{to:"/shop"},{default:g(()=>o[5]||(o[5]=[f("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Shop ",-1)])),_:1,__:[5]})]),h(s)],64)}}},M=U(B,[["__scopeId","data-v-85841e11"]]),W="modulepreload",G=function(e){return"/"+e},R={},a=function(r,n,o){let t=Promise.resolve();if(n&&n.length>0){let P=function(c){return Promise.all(c.map(l=>Promise.resolve(l).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),d=i?.nonce||i?.getAttribute("nonce");t=P(n.map(c=>{if(c=G(c),c in R)return;R[c]=!0;const l=c.endsWith(".css"),p=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":W,l||(u.as="script"),u.crossOrigin="",u.href=c,d&&u.setAttribute("nonce",d),document.head.appendChild(u),l)return new Promise((m,q)=>{u.addEventListener("load",m),u.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=i,window.dispatchEvent(d),!d.defaultPrevented)throw i}return t.then(i=>{for(const d of i||[])d.status==="rejected"&&s(d.reason);return r().catch(s)})},S=[{slug:"/",redirect:"/log-in"},{slug:"/log-in",section:"auth",requiresAuth:!1,redirectIfLoggedIn:"/dashboard",supportedRoles:[],componentPath:"@/components/auth/log-in.vue",preLoadSections:["dashboard"]},{slug:"/sign-up",section:"auth",requiresAuth:!1,redirectIfLoggedIn:"/dashboard",supportedRoles:[],componentPath:"@/components/auth/sign-up.vue",preLoadSections:["dashboard"]},{slug:"/sign-up/onboarding",section:"auth",requiresAuth:!0,redirectIfNotAuth:"/log-in",supportedRoles:["creator"],componentPath:"@/components/auth/sign-up-onboarding.vue",preLoadSections:["dashboard"],dependencies:{roles:{creator:{kycPassed:{required:!1,fallbackSlug:"/dashboard"}}}}},{slug:"/sign-up/onboarding/kyc",section:"auth",requiresAuth:!0,redirectIfNotAuth:"/log-in",supportedRoles:["creator"],componentPath:"@/components/auth/sign-up-onboarding-kyc.vue",preLoadSections:["dashboard"],dependencies:{roles:{creator:{kycPassed:{required:!1,fallbackSlug:"/dashboard"}}}}},{slug:"/sign-up/onboarding/kyc/status",section:"auth",requiresAuth:!0,redirectIfNotAuth:"/log-in",supportedRoles:["creator"],componentPath:"@/components/auth/sign-up/onboarding-kyc-status.vue",preLoadSections:["dashboard"],dependencies:{roles:{creator:{kycPassed:{required:!1,fallbackSlug:"/dashboard"}}}}},{slug:"/lost-password",section:"auth",redirectIfLoggedIn:"/dashboard",requiresAuth:!1,supportedRoles:[],componentPath:"@/components/auth/lost-password.vue",preLoadSections:[]},{slug:"/reset-password",section:"auth",requiresAuth:!1,redirectIfLoggedIn:"/dashboard",supportedRoles:[],componentPath:"@/components/auth/reset-password.vue",preLoadSections:[]},{slug:"/confirm-email",section:"auth",requiresAuth:!1,redirectIfLoggedIn:"/dashboard",supportedRoles:[],componentPath:"@/components/auth/confirm-email.vue",preLoadSections:[]},{slug:"/dashboard",section:"dashboard",requiresAuth:!0,supportedRoles:["any"],redirectIfNotAuth:"/log-in",dependencies:{roles:{creator:{onboardingPassed:{required:!0,fallbackSlug:"/sign-up/onboarding"},kycPassed:{required:!0,fallbackSlug:"/sign-up/onboarding/kyc"}},vendor:{onboardingPassed:{required:!0,fallbackSlug:"/sign-up/onboarding"}},agent:{onboardingPassed:{required:!0,fallbackSlug:"/sign-up/onboarding"}}}},preLoadSections:["profile"],redirect:"/dashboard/overview"},{slug:"/dashboard/overview",section:"dashboard",inheritConfigFromParent:!0,customComponentPath:{creator:{componentPath:"@/components/dashboard/dashboardOverviewCreator.vue"},vendor:{componentPath:"@/components/dashboard/dashboardOverviewVendor.vue"},customer:{componentPath:"@/components/dashboard/dashboardOverviewCustomer.vue"},agent:{componentPath:"@/components/dashboard/dashboardOverviewAgent.vue"}},preLoadSections:[]},{slug:"/profile",section:"profile",requiresAuth:!0,supportedRoles:["any"],componentPath:"@/components/profile/index.vue",preLoadSections:[]},{slug:"/discover",section:"discover",requiresAuth:!1,supportedRoles:[],componentPath:"@/components/discover/index.vue",preLoadSections:[]},{slug:"/shop",section:"shop",requiresAuth:!1,supportedRoles:[],componentPath:"@/components/shop/index.vue",preLoadSections:[]},{slug:"/404",section:"misc",requiresAuth:!1,supportedRoles:[],componentPath:"@/components/NotFound.vue",preLoadSections:[]},{slug:"/:pathMatch(.*)*",redirect:"/404"}],H=Object.assign({"/src/components/NavBar.vue":()=>a(()=>import("./NavBar-dFoVEPP7.js"),__vite__mapDeps([0,1,2,3])),"/src/components/NotFound.vue":()=>a(()=>import("./section-misc-C-d7Gs7q.js"),__vite__mapDeps([4,2,1])),"/src/components/auth/confirm-email.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.c),__vite__mapDeps([2,1])),"/src/components/auth/log-in.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.l),__vite__mapDeps([2,1])),"/src/components/auth/lost-password.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.a),__vite__mapDeps([2,1])),"/src/components/auth/reset-password.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.r),__vite__mapDeps([2,1])),"/src/components/auth/sign-up-onboarding-kyc.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.s),__vite__mapDeps([2,1])),"/src/components/auth/sign-up-onboarding.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.b),__vite__mapDeps([2,1])),"/src/components/auth/sign-up.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.d),__vite__mapDeps([2,1])),"/src/components/auth/sign-up/onboarding-kyc-status.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.o),__vite__mapDeps([2,1])),"/src/components/dashboard/dashboardOverviewAgent.vue":()=>a(()=>import("./section-dashboard-CePaFXMC.js").then(e=>e.d),__vite__mapDeps([5,2,1])),"/src/components/dashboard/dashboardOverviewCreator.vue":()=>a(()=>import("./section-dashboard-CePaFXMC.js").then(e=>e.a),__vite__mapDeps([5,2,1])),"/src/components/dashboard/dashboardOverviewCustomer.vue":()=>a(()=>import("./section-dashboard-CePaFXMC.js").then(e=>e.b),__vite__mapDeps([5,2,1])),"/src/components/dashboard/dashboardOverviewVendor.vue":()=>a(()=>import("./section-dashboard-CePaFXMC.js").then(e=>e.c),__vite__mapDeps([5,2,1])),"/src/components/dashboard/index.vue":()=>a(()=>import("./section-dashboard-CePaFXMC.js").then(e=>e.i),__vite__mapDeps([5,2,1])),"/src/components/discover/index.vue":()=>a(()=>import("./section-discover-DMBP-QMR.js"),__vite__mapDeps([6,2,1])),"/src/components/profile/index.vue":()=>a(()=>import("./section-profile-CkM0NFLE.js"),__vite__mapDeps([7,2,1,8])),"/src/components/shop/index.vue":()=>a(()=>import("./section-shop-yR9g0lVP.js"),__vite__mapDeps([9,2,1]))});function w(e){if(!e||typeof e!="string")return console.log(`Invalid path provided: "${e}".`),()=>Promise.reject(new Error("lazy(): invalid path"));if(e.includes("App.vue"))return console.log("Attempted to lazily load App.vue."),()=>Promise.reject(new Error("lazy(): cannot dynamically load App.vue"));let r=e.replace(/^@\/?/,"/src/");r.startsWith("/")||(r=`/${r}`);const n=H[r];return n||(console.log(`No module found for path "${r}".`),()=>Promise.reject(new Error(`lazy(): component not found for path ${r}`)))}const y=I("sections",{state:()=>({activated:{auth:!1,dashboard:!1,profile:!1,discover:!1,shop:!1,misc:!1}}),actions:{markActivated(e){this.activated[e]=!0},isActivated(e){return this.activated[e]?(console.log(`Section "${e}" already cached.`),!0):!1}}});let b=null;const A=Object.create(null);async function J(){if(b)return b;try{const e=await fetch("/section-bundles.json",{cache:"no-cache"});if(!e.ok)throw new Error(`HTTP ${e.status}`);return b=await e.json(),b}catch(e){return console.log(`Failed to load section-bundles.json: ${e.message}`),{}}}async function K(e){return!!A[e]}async function L(e){if(A[e])return!0;const n=(await J())[e];if(!n)return console.log(`No bundle found for section "${e}".`),!1;const o=performance.now();console.log(`Preload section "${e}" and its assets`);try{await import(n),A[e]=!0;const t=performance.now()-o;return console.log(`Preload "${e}" Assets and section "${e}" cached`),console.log(`Preloading completed in ${t.toFixed(2)}ms`),!0}catch(t){return console.log(`Failed to preload section "${e}": ${t.message}`),!1}}function Q(e){e.afterEach(async r=>{const n=r.meta?.section;n&&(await K(n)||(requestIdleCallback?requestIdleCallback(async()=>{await L(n)&&y().markActivated(n)}):setTimeout(async()=>{await L(n)&&y().markActivated(n)},0)))})}function O(e){return S.find(r=>r.slug===e||r.dynamicRoute&&e.match(new RegExp(r.slug.replace(/:[^/]+/g,"[^/]+"))))}function X(e,r,n){const o=O(e.path),t=v(),s=t.simulate||t.currentUser;if(!o)return n("/404");let i=!!s;if(i=!0,o.requiresAuth&&!i)return n(o.redirectIfNotAuth||"/log-in");if(!o.requiresAuth&&i&&o.redirectIfLoggedIn)return n(o.redirectIfLoggedIn);if(o.supportedRoles?.length&&!["any","all"].includes(o.supportedRoles[0])&&!o.supportedRoles.includes(s?.role))return n("/dashboard");const P=[...o.inheritConfigFromParent?Y(e.path):[],o];for(const c of P){if(!c)continue;const l=c.dependencies||{},p=l.roles?.[s?.role]||{};for(const[u,m]of Object.entries(p))if(m.required&&!s?.[u])return n(m.fallbackSlug||"/404");for(const[u,m]of Object.entries(l))if(u!=="roles"&&m.required&&!s?.[u])return n(m.fallbackSlug||"/404")}n()}function Y(e){const r=e.split("/");r.pop();const n=r.join("/")||"/",o=O(n);return o?[o]:[]}function Z(e){const r={path:e.slug,meta:e};return e.redirect?r.redirect=e.redirect:e.customComponentPath?r.component=()=>{const n=v(),o=n.simulate?.role||n.currentUser?.role||"default",t=e.customComponentPath[o]?.componentPath;return t?w(t)():a(()=>import("./section-misc-C-d7Gs7q.js"),__vite__mapDeps([4,2,1]))}:r.component=e.componentPath?w(e.componentPath):()=>a(()=>import("./section-misc-C-d7Gs7q.js"),__vite__mapDeps([4,2,1])),r}const D=S.map(Z),_=N({history:j("/"),routes:D});_.beforeEach((e,r,n)=>{console.log(`Route request for "${e.path}"`),console.log("Checking route configuration.");const o=D.find(t=>t.path===e.path);if(!o)console.log("404 do nothing more!!!"),n("/404");else{console.log("Route found in configuration."),console.log(`Configuration data for the route is ${JSON.stringify(o.meta)}.`);const t=o.meta?.section;t&&console.log(`Route belongs to section "${t}".`),n()}});_.beforeEach(X);Q(_);_.isReady().then(()=>{y(),v().refreshFromStorage()});const E=x(M);E.use(F());E.use(_);E.mount("#app");
//# sourceMappingURL=index-DU6WlyxH.js.map
