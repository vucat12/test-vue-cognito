const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/NavBar-dFoVEPP7.js","assets/vendor-CsUw8uuj.js","assets/section-auth-BNoliYnU.js","assets/NavBar-DA1KUzTM.css","assets/section-misc-C-d7Gs7q.js","assets/section-dashboard-CePaFXMC.js","assets/section-discover-DMBP-QMR.js","assets/section-profile-aPJNzJui.js","assets/section-profile-1HY9qHSu.css","assets/section-shop-yR9g0lVP.js"])))=>i.map(i=>d[i]);
import{d as I,j as q,c as C,o as V,a as f,b as h,e as g,f as k,F as $,g as N,h as j,i as U,k as x}from"./vendor-CsUw8uuj.js";import{_ as F}from"./section-auth-BNoliYnU.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const v=I("auth",{state:()=>({idToken:null,currentUser:null,simulate:null}),actions:{setTokenAndDecode(e){this.idToken=e;const o=q(e);this.currentUser={email:o.email,role:o["custom:role"],kycPassed:o["custom:kycPassed"]==="true",onboardingPassed:o["custom:onboardingPassed"]==="true",awsDataCheck:o["custom:awsDataCheck"]==="true",raw:o}},refreshFromStorage(){const e=localStorage.getItem("idToken");e&&this.setTokenAndDecode(e)},simulateRole(e,o={}){this.simulate={role:e,...o}},updateUserAttributesLocally(e){this.currentUser={...this.currentUser,...e}},logout(){localStorage.clear(),this.$reset()}},persist:!0}),B={style:{padding:"1rem","background-color":"#f0f0f0",display:"flex",gap:"1rem"}},z={__name:"App",setup(e){return v().simulateRole("creator",{onboardingPassed:!0,kycPassed:!0}),(n,t)=>{const r=k("router-link"),s=k("router-view");return V(),C($,null,[f("nav",B,[h(r,{to:"/sign-up"},{default:g(()=>t[0]||(t[0]=[f("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Sign Up ",-1)])),_:1,__:[0]}),h(r,{to:"/log-in"},{default:g(()=>t[1]||(t[1]=[f("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Log In ",-1)])),_:1,__:[1]}),h(r,{to:"/dashboard"},{default:g(()=>t[2]||(t[2]=[f("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Dashboard ",-1)])),_:1,__:[2]}),h(r,{to:"/profile"},{default:g(()=>t[3]||(t[3]=[f("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Profile ",-1)])),_:1,__:[3]}),h(r,{to:"/discover"},{default:g(()=>t[4]||(t[4]=[f("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Discover ",-1)])),_:1,__:[4]}),h(r,{to:"/shop"},{default:g(()=>t[5]||(t[5]=[f("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Shop ",-1)])),_:1,__:[5]})]),h(s)],64)}}},M=F(z,[["__scopeId","data-v-85841e11"]]),H="modulepreload",W=function(e){return"/"+e},L={},a=function(o,n,t){let r=Promise.resolve();if(n&&n.length>0){let P=function(c){return Promise.all(c.map(l=>Promise.resolve(l).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),d=i?.nonce||i?.getAttribute("nonce");r=P(n.map(c=>{if(c=W(c),c in L)return;L[c]=!0;const l=c.endsWith(".css"),p=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":H,l||(u.as="script"),u.crossOrigin="",u.href=c,d&&u.setAttribute("nonce",d),document.head.appendChild(u),l)return new Promise((m,T)=>{u.addEventListener("load",m),u.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=i,window.dispatchEvent(d),!d.defaultPrevented)throw i}return r.then(i=>{for(const d of i||[])d.status==="rejected"&&s(d.reason);return o().catch(s)})},S=[{slug:"/",redirect:"/log-in"},{slug:"/log-in",section:"auth",requiresAuth:!1,redirectIfLoggedIn:"/dashboard",supportedRoles:[],componentPath:"@/components/auth/log-in.vue",preLoadSections:["dashboard"]},{slug:"/sign-up",section:"auth",requiresAuth:!1,redirectIfLoggedIn:"/dashboard",supportedRoles:[],componentPath:"@/components/auth/sign-up.vue",preLoadSections:["dashboard"]},{slug:"/sign-up/onboarding",section:"auth",requiresAuth:!0,redirectIfNotAuth:"/log-in",supportedRoles:["creator"],componentPath:"@/components/auth/sign-up-onboarding.vue",preLoadSections:["dashboard"],dependencies:{roles:{creator:{kycPassed:{required:!1,fallbackSlug:"/dashboard"}}}}},{slug:"/sign-up/onboarding/kyc",section:"auth",requiresAuth:!0,redirectIfNotAuth:"/log-in",supportedRoles:["creator"],componentPath:"@/components/auth/sign-up-onboarding-kyc.vue",preLoadSections:["dashboard"],dependencies:{roles:{creator:{kycPassed:{required:!1,fallbackSlug:"/dashboard"}}}}},{slug:"/sign-up/onboarding/kyc/status",section:"auth",requiresAuth:!0,redirectIfNotAuth:"/log-in",supportedRoles:["creator"],componentPath:"@/components/auth/sign-up/onboarding-kyc-status.vue",preLoadSections:["dashboard"],dependencies:{roles:{creator:{kycPassed:{required:!1,fallbackSlug:"/dashboard"}}}}},{slug:"/lost-password",section:"auth",redirectIfLoggedIn:"/dashboard",requiresAuth:!1,supportedRoles:[],componentPath:"@/components/auth/lost-password.vue",preLoadSections:[]},{slug:"/reset-password",section:"auth",requiresAuth:!1,redirectIfLoggedIn:"/dashboard",supportedRoles:[],componentPath:"@/components/auth/reset-password.vue",preLoadSections:[]},{slug:"/confirm-email",section:"auth",requiresAuth:!1,redirectIfLoggedIn:"/dashboard",supportedRoles:[],componentPath:"@/components/auth/confirm-email.vue",preLoadSections:[]},{slug:"/dashboard",section:"dashboard",requiresAuth:!0,supportedRoles:["any"],redirectIfNotAuth:"/log-in",dependencies:{roles:{creator:{onboardingPassed:{required:!0,fallbackSlug:"/sign-up/onboarding"},kycPassed:{required:!0,fallbackSlug:"/sign-up/onboarding/kyc"}},vendor:{onboardingPassed:{required:!0,fallbackSlug:"/sign-up/onboarding"}},agent:{onboardingPassed:{required:!0,fallbackSlug:"/sign-up/onboarding"}}}},preLoadSections:["profile"],redirect:"/dashboard/overview"},{slug:"/dashboard/overview",section:"dashboard",inheritConfigFromParent:!0,customComponentPath:{creator:{componentPath:"@/components/dashboard/dashboardOverviewCreator.vue"},vendor:{componentPath:"@/components/dashboard/dashboardOverviewVendor.vue"},customer:{componentPath:"@/components/dashboard/dashboardOverviewCustomer.vue"},agent:{componentPath:"@/components/dashboard/dashboardOverviewAgent.vue"}},preLoadSections:[]},{slug:"/profile",section:"profile",requiresAuth:!0,supportedRoles:["any"],componentPath:"@/components/profile/index.vue",preLoadSections:[]},{slug:"/discover",section:"discover",requiresAuth:!1,supportedRoles:[],componentPath:"@/components/discover/index.vue",preLoadSections:[]},{slug:"/shop",section:"shop",requiresAuth:!1,supportedRoles:[],componentPath:"@/components/shop/index.vue",preLoadSections:[]},{slug:"/404",section:"misc",requiresAuth:!1,supportedRoles:[],componentPath:"@/components/NotFound.vue",preLoadSections:[]},{slug:"/:pathMatch(.*)*",redirect:"/404"}],G=Object.assign({"/src/components/NavBar.vue":()=>a(()=>import("./NavBar-dFoVEPP7.js"),__vite__mapDeps([0,1,2,3])),"/src/components/NotFound.vue":()=>a(()=>import("./section-misc-C-d7Gs7q.js"),__vite__mapDeps([4,2,1])),"/src/components/auth/confirm-email.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.c),__vite__mapDeps([2,1])),"/src/components/auth/log-in.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.l),__vite__mapDeps([2,1])),"/src/components/auth/lost-password.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.a),__vite__mapDeps([2,1])),"/src/components/auth/reset-password.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.r),__vite__mapDeps([2,1])),"/src/components/auth/sign-up-onboarding-kyc.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.s),__vite__mapDeps([2,1])),"/src/components/auth/sign-up-onboarding.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.b),__vite__mapDeps([2,1])),"/src/components/auth/sign-up.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.d),__vite__mapDeps([2,1])),"/src/components/auth/sign-up/onboarding-kyc-status.vue":()=>a(()=>import("./section-auth-BNoliYnU.js").then(e=>e.o),__vite__mapDeps([2,1])),"/src/components/dashboard/dashboardOverviewAgent.vue":()=>a(()=>import("./section-dashboard-CePaFXMC.js").then(e=>e.d),__vite__mapDeps([5,2,1])),"/src/components/dashboard/dashboardOverviewCreator.vue":()=>a(()=>import("./section-dashboard-CePaFXMC.js").then(e=>e.a),__vite__mapDeps([5,2,1])),"/src/components/dashboard/dashboardOverviewCustomer.vue":()=>a(()=>import("./section-dashboard-CePaFXMC.js").then(e=>e.b),__vite__mapDeps([5,2,1])),"/src/components/dashboard/dashboardOverviewVendor.vue":()=>a(()=>import("./section-dashboard-CePaFXMC.js").then(e=>e.c),__vite__mapDeps([5,2,1])),"/src/components/dashboard/index.vue":()=>a(()=>import("./section-dashboard-CePaFXMC.js").then(e=>e.i),__vite__mapDeps([5,2,1])),"/src/components/discover/index.vue":()=>a(()=>import("./section-discover-DMBP-QMR.js"),__vite__mapDeps([6,2,1])),"/src/components/profile/index.vue":()=>a(()=>import("./section-profile-aPJNzJui.js"),__vite__mapDeps([7,2,1,8])),"/src/components/shop/index.vue":()=>a(()=>import("./section-shop-yR9g0lVP.js"),__vite__mapDeps([9,2,1]))});function R(e){if(!e||typeof e!="string")return console.log(`Invalid path provided: "${e}".`),()=>Promise.reject(new Error("lazy(): invalid path"));if(e.includes("App.vue"))return console.log("Attempted to lazily load App.vue."),()=>Promise.reject(new Error("lazy(): cannot dynamically load App.vue"));let o=e.replace(/^@\/?/,"/src/");o.startsWith("/")||(o=`/${o}`);const n=G[o];return n||(console.log(`No module found for path "${o}".`),()=>Promise.reject(new Error(`lazy(): component not found for path ${o}`)))}const y=I("sections",{state:()=>({activated:{auth:!1,dashboard:!1,profile:!1,discover:!1,shop:!1,misc:!1}}),actions:{markActivated(e){this.activated[e]=!0},isActivated(e){return this.activated[e]?(console.log(`Section "${e}" already cached.`),!0):!1}}});let b=null;const A=Object.create(null);async function J(){if(b)return b;try{const o=await fetch("/section-bundles.json",{cache:"no-cache"});if(!o.ok)throw new Error(`HTTP ${o.status}`);return b=await o.json(),b}catch(e){return console.log(`Failed to load section-bundles.json: ${e.message}`),{}}}async function K(e){return A[e]?(console.log(`[CACHE_HIT] Using preloaded ${e} bundle`),!0):!1}async function w(e){if(A[e])return!0;const n=(await J())[e];if(!n)return console.log(`No bundle found for section "${e}".`),!1;const t=performance.now();console.log(`Preload section "${e}" and its assets`),console.log(`[SECTION_BUNDLE] Loading ${e} bundle: ${n}`);try{await import(n),A[e]=!0,console.log(`[SECTION_ACTIVATED] All ${e} components now available`);const s=performance.now()-t;return console.log(`Preload "${e}" Assets and section "${e}" cached`),console.log(`Preloading completed in ${s.toFixed(2)}ms`),!0}catch(r){return console.log(`Failed to preload section "${e}": ${r.message}`),!1}}function Q(e){e.afterEach(async o=>{const n=o.meta?.section;n&&(await K(n)||(requestIdleCallback?requestIdleCallback(async()=>{await w(n)&&y().markActivated(n)}):setTimeout(async()=>{await w(n)&&y().markActivated(n)},0)))})}function O(e){return S.find(o=>o.slug===e||o.dynamicRoute&&e.match(new RegExp(o.slug.replace(/:[^/]+/g,"[^/]+"))))}function X(e,o,n){const t=O(e.path),r=v(),s=r.simulate||r.currentUser;if(!t)return n("/404");let i=!!s;if(i=!0,t.requiresAuth&&!i)return n(t.redirectIfNotAuth||"/log-in");if(!t.requiresAuth&&i&&t.redirectIfLoggedIn)return n(t.redirectIfLoggedIn);if(t.supportedRoles?.length&&!["any","all"].includes(t.supportedRoles[0])&&!t.supportedRoles.includes(s?.role))return n("/dashboard");const P=[...t.inheritConfigFromParent?Y(e.path):[],t];for(const c of P){if(!c)continue;const l=c.dependencies||{},p=l.roles?.[s?.role]||{};for(const[u,m]of Object.entries(p))if(m.required&&!s?.[u])return n(m.fallbackSlug||"/404");for(const[u,m]of Object.entries(l))if(u!=="roles"&&m.required&&!s?.[u])return n(m.fallbackSlug||"/404")}n()}function Y(e){const o=e.split("/");o.pop();const n=o.join("/")||"/",t=O(n);return t?[t]:[]}function Z(e){const o={path:e.slug,meta:e};return e.redirect?o.redirect=e.redirect:e.customComponentPath?o.component=()=>{const n=v(),t=n.simulate?.role||n.currentUser?.role||"default",r=e.customComponentPath[t]?.componentPath;return r?R(r)():a(()=>import("./section-misc-C-d7Gs7q.js"),__vite__mapDeps([4,2,1]))}:o.component=e.componentPath?R(e.componentPath):()=>a(()=>import("./section-misc-C-d7Gs7q.js"),__vite__mapDeps([4,2,1])),o}const D=S.map(Z),_=N({history:j("/"),routes:D});_.beforeEach((e,o,n)=>{console.log(`Route request for "${e.path}"`),console.log("Checking route configuration.");const t=D.find(r=>r.path===e.path);if(!t)console.log("404 do nothing more!!!"),n("/404");else{console.log("Route found in configuration."),console.log(`Configuration data for the route is ${JSON.stringify(t.meta)}.`);const r=t.meta?.section;r&&console.log(`Route belongs to section "${r}".`),n()}});_.beforeEach(X);Q(_);_.isReady().then(()=>{y(),v().refreshFromStorage()});const E=U(M);E.use(x());E.use(_);E.mount("#app");
//# sourceMappingURL=index-Bj7bNrvd.js.map
